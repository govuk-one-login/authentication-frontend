{% extends "common/layout/base.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "common/show-password/macro.njk" import customGovukPasswordInput, customGovukRetypePasswordInput with context %}

{% set pageTitleName = 'pages.resetPassword.title' | translate %}

{% block content %}

    {% include "common/errors/errorSummary.njk" %}

    <h1 class="govuk-heading-l govuk-!-margin-top-0 govuk-!-margin-bottom-3">{{ 'pages.resetPassword.header' | translate }}</h1>

    {% if isPasswordChangeRequired %}
        <p class="govuk-body">{{ 'pages.resetPassword.password.paragraphRequired' | translate }}</p>
    {% endif %}

    <form action="/reset-password" method="post" novalidate>

        <input type="hidden" name="_csrf" value="{{ csrfToken }}" />

        {{ customGovukPasswordInput({
            label: {
                text: 'pages.resetPassword.password.label' | translate
            },
            hint: {
                text: 'pages.resetPassword.password.hintText' | translate
            },
            id: 'password',
            autocomplete: 'new-password',
            errors: errors
        }) }}

        {{ customGovukRetypePasswordInput({
            label: {
                text: 'pages.resetPassword.confirmPassword.label' | translate
            },
            id: 'confirm-password',
            autocomplete: 'new-password',
            errors: errors
        }) }}

        {% include "common/password-guidance/_password-guidance-details.njk" %}

        {{ govukButton({
            "text": "general.continue.label" | translate,
            "type": "Submit",
            "preventDoubleClick": true
        }) }}

    </form>

    {% set ga4Params = { nonce: scriptNonce, englishPageTitle: pageTitleName, loggedInStatus: false, dynamic: false } %}
    {%- include "ga4-opl/template.njk" -%}
{% endblock %}

{% block scripts %}
    <script defer type="text/javascript" src="/public/scripts/prevent-double-form-submit.js"></script>
{% endblock %}
